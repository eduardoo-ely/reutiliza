<!-- frontend/src/app/modules/admin/dashboard-admin/dashboard-admin.component.html -->
<div class="dashboard-admin">
    <!-- Header Mobile com Menu Hamburguer -->
    <div class="mobile-header">
        <h1>ğŸ“Š Admin</h1>
        <button class="menu-toggle" (click)="toggleMenuMobile()">
            <span *ngIf="!menuMobileAberto">â˜°</span>
            <span *ngIf="menuMobileAberto">âœ–</span>
        </button>
    </div>

    <!-- Header Desktop -->
    <div class="header desktop-only">
        <div class="header-content">
            <h1>ğŸ“Š Painel Administrativo</h1>
            <div class="filtros">
                <button (click)="alterarPeriodo(7)" [class.ativo]="periodo === 7">
                    7 dias
                </button>
                <button (click)="alterarPeriodo(30)" [class.ativo]="periodo === 30">
                    30 dias
                </button>
                <button (click)="alterarPeriodo(90)" [class.ativo]="periodo === 90">
                    90 dias
                </button>
                <button (click)="carregarMetricas()" class="btn-refresh">
                    ğŸ”„
                </button>
            </div>
        </div>
    </div>

    <!-- Filtros Mobile -->
    <div class="filtros-mobile mobile-only" *ngIf="!carregando">
        <button (click)="alterarPeriodo(7)" [class.ativo]="periodo === 7">7d</button>
        <button (click)="alterarPeriodo(30)" [class.ativo]="periodo === 30">30d</button>
        <button (click)="alterarPeriodo(90)" [class.ativo]="periodo === 90">90d</button>
        <button (click)="carregarMetricas()" class="btn-refresh">ğŸ”„</button>
    </div>

    <!-- Loading -->
    <div *ngIf="carregando" class="loading">
        <div class="spinner"></div>
        <p>Carregando mÃ©tricas...</p>
    </div>

    <!-- Erro -->
    <div *ngIf="erro && !carregando" class="erro">
        <p>{{ erro }}</p>
        <button (click)="carregarMetricas()" class="btn-retry">Tentar novamente</button>
    </div>

    <!-- Dashboard Content -->
    <div *ngIf="metricas && !carregando" class="dashboard-content">

        <!-- Alertas Urgentes -->
        <div class="alertas-section" *ngIf="metricas.alertas.denunciasPendentes > 0 || metricas.alertas.materiaisPendentes > 0">
            <h2 class="section-title">âš ï¸ Alertas</h2>
            <div class="alertas-grid">
                <div class="alerta-card urgente" *ngIf="metricas.alertas.denunciasPendentes > 0"
                     (click)="navegarPara('denuncias')">
                    <div class="alerta-icon">ğŸš¨</div>
                    <div class="alerta-info">
                        <h3>{{ metricas.alertas.denunciasPendentes }}</h3>
                        <p>DenÃºncias</p>
                    </div>
                </div>

                <div class="alerta-card aviso" *ngIf="metricas.alertas.materiaisPendentes > 0"
                     (click)="navegarPara('validacao')">
                    <div class="alerta-icon">â³</div>
                    <div class="alerta-info">
                        <h3>{{ metricas.alertas.materiaisPendentes }}</h3>
                        <p>Pendentes</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cards de MÃ©tricas -->
        <div class="metricas-grid">
            <!-- Card UsuÃ¡rios -->
            <div class="metric-card" (click)="navegarPara('usuarios')">
                <div class="card-icon">ğŸ‘¥</div>
                <div class="card-content">
                    <h3>UsuÃ¡rios</h3>
                    <div class="metric-value">{{ metricas.usuarios.total }}</div>
                    <div class="metric-details">
                        <span>âœ… {{ metricas.usuarios.ativos }} ativos</span>
                        <span>ğŸ†• {{ metricas.usuarios.novos }} novos</span>
                    </div>
                    <div class="metric-footer" [ngClass]="getCorCrescimento(metricas.usuarios.crescimento)">
                        {{ getIconeCrescimento(metricas.usuarios.crescimento) }}
                        {{ metricas.usuarios.crescimento }}%
                    </div>
                </div>
            </div>

            <!-- Card Materiais -->
            <div class="metric-card" (click)="navegarPara('materiais')">
                <div class="card-icon">â™»ï¸</div>
                <div class="card-content">
                    <h3>Materiais</h3>
                    <div class="metric-value">{{ metricas.materiais.total }}</div>
                    <div class="metric-details">
                        <span>âœ… {{ metricas.materiais.validados }}</span>
                        <span>â³ {{ metricas.materiais.pendentes }}</span>
                    </div>
                    <div class="metric-footer" [ngClass]="getCorCrescimento(metricas.materiais.crescimento)">
                        {{ getIconeCrescimento(metricas.materiais.crescimento) }}
                        {{ metricas.materiais.crescimento }}%
                    </div>
                </div>
            </div>

            <!-- Card Pontos -->
            <div class="metric-card" (click)="navegarPara('pontos')">
                <div class="card-icon">ğŸ“</div>
                <div class="card-content">
                    <h3>Pontos</h3>
                    <div class="metric-value">{{ metricas.pontos.total }}</div>
                    <div class="metric-details">
                        <span>âœ… {{ metricas.pontos.ativos }} ativos</span>
                        <span>âŒ {{ metricas.pontos.inativos }} inativos</span>
                    </div>
                </div>
            </div>

            <!-- Card Recompensas -->
            <div class="metric-card" (click)="navegarPara('recompensas')">
                <div class="card-icon">ğŸ</div>
                <div class="card-content">
                    <h3>Recompensas</h3>
                    <div class="metric-value">{{ metricas.recompensas.totalResgates }}</div>
                    <div class="metric-details">
                        <span>ğŸ’° {{ metricas.recompensas.pontosEmCirculacao }} pts</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- AÃ§Ãµes RÃ¡pidas -->
        <div class="acoes-section">
            <h2 class="section-title">âš¡ AÃ§Ãµes RÃ¡pidas</h2>
            <div class="acoes-grid">
                <button class="acao-btn" (click)="navegarPara('validacao')">
                    <span class="acao-icon">âœ…</span>
                    <span class="acao-text">Validar Materiais</span>
                </button>

                <button class="acao-btn" (click)="navegarPara('denuncias')">
                    <span class="acao-icon">ğŸš¨</span>
                    <span class="acao-text">DenÃºncias</span>
                </button>

                <button class="acao-btn" (click)="navegarPara('usuarios')">
                    <span class="acao-icon">ğŸ‘¥</span>
                    <span class="acao-text">UsuÃ¡rios</span>
                </button>

                <button class="acao-btn" (click)="navegarPara('pontos')">
                    <span class="acao-icon">ğŸ“</span>
                    <span class="acao-text">Pontos</span>
                </button>

                <button class="acao-btn" (click)="navegarPara('recompensas')">
                    <span class="acao-icon">ğŸ</span>
                    <span class="acao-text">Recompensas</span>
                </button>

                <button class="acao-btn" (click)="navegarPara('metricas')">
                    <span class="acao-icon">ğŸ“Š</span>
                    <span class="acao-text">MÃ©tricas</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Menu Mobile Overlay -->
    <div class="mobile-menu-overlay" *ngIf="menuMobileAberto" (click)="toggleMenuMobile()"></div>
    <div class="mobile-menu" [class.aberto]="menuMobileAberto">
        <div class="mobile-menu-header">
            <h3>Menu Admin</h3>
            <button class="close-btn" (click)="toggleMenuMobile()">âœ–</button>
        </div>
        <div class="mobile-menu-content">
            <button class="menu-item" (click)="navegarPara('usuarios'); toggleMenuMobile()">
                <span>ğŸ‘¥</span> UsuÃ¡rios
            </button>
            <button class="menu-item" (click)="navegarPara('materiais'); toggleMenuMobile()">
                <span>â™»ï¸</span> Materiais
            </button>
            <button class="menu-item" (click)="navegarPara('pontos'); toggleMenuMobile()">
                <span>ğŸ“</span> Pontos de Coleta
            </button>
            <button class="menu-item" (click)="navegarPara('recompensas'); toggleMenuMobile()">
                <span>ğŸ</span> Recompensas
            </button>
            <button class="menu-item" (click)="navegarPara('denuncias'); toggleMenuMobile()">
                <span>ğŸš¨</span> DenÃºncias
            </button>
            <button class="menu-item" (click)="navegarPara('metricas'); toggleMenuMobile()">
                <span>ğŸ“Š</span> MÃ©tricas
            </button>
            <button class="menu-item" (click)="router.navigate(['/']); toggleMenuMobile()">
                <span>ğŸ </span> Voltar ao App
            </button>
        </div>
    </div>
</div>