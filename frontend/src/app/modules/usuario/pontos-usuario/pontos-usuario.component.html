<div class="pontos-container">
    <div class="pontos-header">
        <h2>ğŸ† Meus Pontos de Reciclagem</h2>
        <button class="btn-reload" (click)="recarregar()" *ngIf="!carregando">
            ğŸ”„ Atualizar
        </button>
    </div>

    <!-- Loading -->
    <div class="loading-spinner" *ngIf="carregando">
        <div class="spinner"></div>
        <p>Carregando seus pontos...</p>
    </div>

    <!-- Erro -->
    <div class="alert alert-danger" *ngIf="mensagemErro && !carregando">
        âŒ {{ mensagemErro }}
    </div>

    <!-- ConteÃºdo -->
    <div class="pontos-content" *ngIf="!carregando && pontosUsuario">
        <!-- Card Principal de Pontos -->
        <div class="pontos-card">
            <div class="pontos-total">
                <div class="pontos-valor">{{ getPontosDisponiveis() }}</div>
                <div class="pontos-label">Pontos DisponÃ­veis</div>
            </div>

            <div class="pontos-info">
                <div class="info-item">
                    <span class="info-label">ğŸ’° Total acumulado:</span>
                    <span class="info-value">{{ pontosUsuario.pontos }} pontos</span>
                </div>
                <div class="info-item">
                    <span class="info-label">ğŸ Pontos utilizados:</span>
                    <span class="info-value">{{ pontosUsuario.pontosUtilizados }} pontos</span>
                </div>
                <div class="info-item">
                    <span class="info-label">ğŸ“Š Total de transaÃ§Ãµes:</span>
                    <span class="info-value">{{ getEstatisticas().totalTransacoes }}</span>
                </div>
            </div>
        </div>

        <!-- EstatÃ­sticas RÃ¡pidas -->
        <div class="stats-grid">
            <div class="stat-card stat-ganho">
                <div class="stat-icon">ğŸ“ˆ</div>
                <div class="stat-label">Total Ganho</div>
                <div class="stat-value">{{ getEstatisticas().totalGanhos }}</div>
            </div>
            <div class="stat-card stat-gasto">
                <div class="stat-icon">ğŸ“‰</div>
                <div class="stat-label">Total Gasto</div>
                <div class="stat-value">{{ getEstatisticas().totalGastos }}</div>
            </div>
        </div>

        <!-- HistÃ³rico de TransaÃ§Ãµes -->
        <div class="historico-section">
            <h3>ğŸ“œ HistÃ³rico de TransaÃ§Ãµes</h3>

            <div class="empty-state" *ngIf="!pontosUsuario.historicoTransacoes || pontosUsuario.historicoTransacoes.length === 0">
                <p>VocÃª ainda nÃ£o possui transaÃ§Ãµes de pontos.</p>
                <p class="hint">Recicle materiais para ganhar seus primeiros pontos!</p>
            </div>

            <div class="transacoes-list" *ngIf="pontosUsuario.historicoTransacoes && pontosUsuario.historicoTransacoes.length > 0">
                <div class="transacao-item" *ngFor="let transacao of getTransacoesOrdenadas()">
                    <div class="transacao-icon" [ngClass]="{'icon-ganho': transacao.tipo === 'ganho', 'icon-gasto': transacao.tipo === 'gasto'}">
                        {{ transacao.tipo === 'ganho' ? 'â•' : 'â–' }}
                    </div>
                    <div class="transacao-content">
                        <div class="transacao-descricao">{{ transacao.descricao }}</div>
                        <div class="transacao-data">{{ formatarData(transacao.data) }}</div>
                    </div>
                    <div class="transacao-pontos" [ngClass]="{'pontos-ganho': transacao.tipo === 'ganho', 'pontos-gasto': transacao.tipo === 'gasto'}">
                        {{ transacao.tipo === 'ganho' ? '+' : '-' }}{{ transacao.pontos }}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Estado Vazio -->
    <div class="empty-state" *ngIf="!carregando && !pontosUsuario && !mensagemErro">
        <div class="empty-icon">ğŸŒ±</div>
        <h3>Comece a Reciclar!</h3>
        <p>VocÃª ainda nÃ£o possui pontos de reciclagem.</p>
        <p>Registre materiais para ganhar seus primeiros pontos!</p>
    </div>
</div>