<div class="notificacoes-container">
    <div class="notificacoes-header">
        <div class="header-left">
            <h2>üîî Notifica√ß√µes</h2>
            <span class="badge-nao-lidas" *ngIf="totalNaoLidas > 0">
        {{ totalNaoLidas }} n√£o lida{{ totalNaoLidas > 1 ? 's' : '' }}
      </span>
        </div>
        <div class="header-actions">
            <button
                    class="btn-marcar-todas"
                    (click)="marcarTodasComoLidas()"
                    *ngIf="totalNaoLidas > 0">
                ‚úì Marcar todas como lidas
            </button>
        </div>
    </div>

    <!-- Filtros -->
    <div class="filtros">
        <button
                [class.active]="filtroAtivo === 'todas'"
                (click)="mudarFiltro('todas')">
            Todas ({{ notificacoes.length }})
        </button>
        <button
                [class.active]="filtroAtivo === 'naoLidas'"
                (click)="mudarFiltro('naoLidas')">
            N√£o lidas ({{ totalNaoLidas }})
        </button>
    </div>

    <!-- Mensagem de Feedback -->
    <div
            class="alert"
            [ngClass]="{
      'alert-success': tipoMensagem === 'success',
      'alert-error': tipoMensagem === 'error',
      'alert-info': tipoMensagem === 'info'
    }"
            *ngIf="mensagem">
        {{ mensagem }}
    </div>

    <!-- Loading -->
    <div class="loading-spinner" *ngIf="carregando">
        <div class="spinner"></div>
        <p>Carregando notifica√ß√µes...</p>
    </div>

    <!-- Lista de Notifica√ß√µes -->
    <div class="notificacoes-lista" *ngIf="!carregando">
        <div
                class="notificacao-item"
                *ngFor="let notif of notificacoes"
                [class.nao-lida]="!notif.lida"
                [class]="getClassePrioridade(notif.prioridade)">

            <div class="notif-icon">
                {{ getIconeTipo(notif.tipo) }}
            </div>

            <div class="notif-content">
                <div class="notif-header">
                    <h4>{{ notif.titulo }}</h4>
                    <span class="notif-data">{{ formatarData(notif.createdAt) }}</span>
                </div>
                <p class="notif-mensagem">{{ notif.mensagem }}</p>

                <div class="notif-footer">
          <span class="notif-prioridade">
            {{ notif.prioridade }}
          </span>
                    <div class="notif-actions">
                        <button
                                class="btn-acao marcar"
                                *ngIf="!notif.lida"
                                (click)="marcarComoLida(notif._id)"
                                title="Marcar como lida">
                            ‚úì
                        </button>
                        <button
                                class="btn-acao excluir"
                                (click)="deletarNotificacao(notif._id)"
                                title="Excluir">
                            üóëÔ∏è
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Estado Vazio -->
        <div class="empty-state" *ngIf="notificacoes.length === 0">
            <div class="empty-icon">üì≠</div>
            <h3>Nenhuma notifica√ß√£o</h3>
            <p *ngIf="filtroAtivo === 'todas'">Voc√™ n√£o possui notifica√ß√µes no momento.</p>
            <p *ngIf="filtroAtivo === 'naoLidas'">Todas as notifica√ß√µes foram lidas!</p>
        </div>
    </div>
</div>