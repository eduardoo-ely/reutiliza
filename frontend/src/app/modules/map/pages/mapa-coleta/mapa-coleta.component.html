<div class="map-wrapper">
    <div id="map"></div>

    <!-- Top Panel -->
    <div class="top-panel">
        <div class="search-box" (click)="onClickReutiliza()">
            <span class="search-icon">üîç</span>
            <span class="search-text">ReUtiliza</span>
        </div>
    </div>

    <!-- MENU LATERAL REDESENHADO -->
    <div class="material-menu">

        <!-- BOT√ÉO PRINCIPAL (abre/fecha) -->
        <button
                class="material-main-btn"
                [class.has-route]="routingControl"
                (click)="toggleMenu()"
                [title]="menuAberto ? 'Fechar Menu' : 'Abrir Menu de Materiais'">
            {{ menuAberto ? '‚úñ' : '‚ôªÔ∏è' }}
        </button>

        <!-- SUBMENU DE MATERIAIS -->
        <div class="material-submenu" *ngIf="menuAberto && materiaisDisponiveis.length > 0">
            <button
                    *ngFor="let material of materiaisDisponiveis; let i = index"
                    class="material-btn"
                    [class.selected]="materialSelecionado === material.nome"
                    [title]="material.nome"
                    (click)="selecionarMaterial(material)">
                {{ material.icone }}
            </button>
        </div>

        <!-- Mensagem se n√£o houver materiais -->
        <div class="material-submenu" *ngIf="menuAberto && materiaisDisponiveis.length === 0" style="padding: 16px; text-align: center; color: #757575; font-size: 13px; width: 200px;">
            <p style="margin: 0;">Nenhum material dispon√≠vel nos pontos de coleta</p>
        </div>

        <!-- BOT√ÉO LIMPAR ROTA -->
        <button
                class="material-btn clear-btn"
                *ngIf="routingControl"
                title="Limpar Rota"
                (click)="limparRota()">
            ‚úñ
        </button>

        <!-- BOT√ÉO CENTRALIZAR -->
        <button
                class="material-btn recenter-btn"
                title="Centralizar no Mapa"
                (click)="recenterMap()">
            <img src="assets/bussola.png" alt="Centralizar">
        </button>
    </div>

    <!-- Modais -->
    <app-cadastrar-ponto></app-cadastrar-ponto>
    <app-registrar-material
            [pontoColeta]="pontoSelecionado"
            [isVisible]="mostrarModalRegistro"
            (close)="fecharModalRegistro()"
            (materialRegistrado)="onMaterialRegistrado($event)">
    </app-registrar-material>
</div>