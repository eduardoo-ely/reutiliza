<div class="recompensas-container">

    <!-- Cabe√ßalho -->
    <div class="recompensas-header">
        <h2>Recompensas Dispon√≠veis</h2>

        <div class="pontos-badge" *ngIf="pontosUsuario">
            <span class="pontos-valor">{{ getPontosDisponiveis() }}</span>
            <span class="pontos-label">pontos dispon√≠veis</span>
        </div>
    </div>

    <!-- Mensagens -->
    <div
            class="alert"
            [ngClass]="{
      'alert-success': tipoMensagem === 'sucesso',
      'alert-danger': tipoMensagem === 'erro',
      'alert-info': tipoMensagem === 'info'
    }"
            *ngIf="mensagem"
    >
        {{ mensagem }}
    </div>

    <!-- Loading -->
    <div class="loading-spinner" *ngIf="carregando">
        <div class="spinner"></div>
        <p>Carregando recompensas...</p>
    </div>

    <!-- Nenhum item -->
    <div class="empty-state" *ngIf="!carregando && recompensas.length === 0">
        <p>N√£o h√° recompensas dispon√≠veis no momento. Volte mais tarde!</p>
    </div>

    <!-- GRID DE CARDS -->
    <div class="recompensas-grid" *ngIf="!carregando && recompensas.length > 0">

        <div class="recompensa-card" *ngFor="let recompensa of recompensas">

            <!-- IMAGEM DO CARD -->
            <div
                    class="recompensa-imagem"
                    [style.background-image]="
          recompensa.imagem
            ? 'url(' + recompensa.imagem + ')'
            : 'url(/assets/images/reward-placeholder.jpg)'
        "
            >
                <span class="recompensa-tipo">{{ recompensa.tipo }}</span>
            </div>

            <!-- CONTE√öDO DO CARD -->
            <div class="recompensa-conteudo">
                <h3 class="recompensa-titulo">{{ recompensa.nome }}</h3>

                <p class="recompensa-descricao">
                    {{ recompensa.descricao }}
                </p>

                <div class="recompensa-pontos">
                    <span class="pontos-icone">üéÅ</span>
                    <span class="pontos-necessarios">
            {{ recompensa.pontosNecessarios }} pontos
          </span>
                </div>

                <div class="recompensa-validade" *ngIf="recompensa.validade">
                    V√°lido at√©: {{ recompensa.validade | date : "dd/MM/yyyy" }}
                </div>
            </div>

            <!-- FOOTER DO CARD -->
            <div class="recompensa-footer">
                <button
                        class="btn-resgatar"
                        [disabled]="!podeResgatar(recompensa)"
                        (click)="resgatarRecompensa(recompensa)"
                >
                    <ng-container *ngIf="podeResgatar(recompensa); else insuficiente">
                        Resgatar Agora
                    </ng-container>

                    <ng-template #insuficiente>
                        <span>Pontos insuficientes</span>
                    </ng-template>
                </button>
            </div>
        </div>

    </div>
</div>
